---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: production-quota
  namespace: production
  labels:
    toolkit.fluxcd.io/tenant: production
spec:
  hard:
    # CPU limits
    # CPU is a compressible resource, so we can overcommit (allow more than physical cores)
    requests.cpu: "8"        # Total CPU requested by all pods (matches physical cores)
    limits.cpu: "12"         # Maximum CPU limit allowed (50% overcommit for burst capacity)
    
    # Memory limits
    # Memory is non-compressible, so we must leave margin for OS and system components
    # Node has 31Gi total, OS uses ~2.2Gi, leaving ~3Gi margin for K3s/system components
    requests.memory: 16Gi    # Total memory requested by all pods
    limits.memory: 28Gi       # Maximum memory limit allowed (leaves 3Gi for system/K3s)
    
    # Resource counts
    persistentvolumeclaims: "100"  # Maximum number of persistent volumes
    pods: "200"                    # Maximum number of pods in the namespace
    
    # Storage
    requests.storage: 380Gi       # Total storage requested
