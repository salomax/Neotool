apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Namespace first
  - namespace.yaml
  - resource-quota.yaml

  # Helm repositories
  - sources/helmrepositories.yaml

  # Cert-manager (TLS certificate management)
  - cert-manager/helmrelease.yaml
  - cert-manager/issuer.yaml
  - cert-manager/vault-certificate.yaml

  # Vault (secrets management)
  - vault/helmrelease.yaml

  # External Secrets Operator (syncs Vault â†’ K8s)
  # Only the operator HelmRelease - not the ExternalSecret resources
  # Those will be applied after the operator is ready
  - external-secrets/helmrelease.yaml
