micronaut:
  application:
    name: neotool-assistant
  executors:
    blocking:
      virtual: true
  server:
    port: 8082
    thread-selection: blocking
    cors:
      enabled: true
      configurations:
        web:
          allowed-origins:
            - http://localhost:3000
            - http://127.0.0.1:3000
          allowed-methods:
            - GET
            - POST
            - OPTIONS
          allowed-headers:
            - "*"
          allow-credentials: true
          max-age: 3600

# LLM Configuration
llm:
  provider: ${LLM_PROVIDER:gemini}
  gemini:
    api-key: ${GEMINI_API_KEY:}
    model: ${GEMINI_MODEL:gemini-2.5-flash}
    temperature: ${GEMINI_TEMPERATURE:0.7}
    max-tokens: ${GEMINI_MAX_TOKENS:2048}

# GraphQL Client Configuration
graphql:
  endpoint: ${GRAPHQL_ENDPOINT:}
  timeout-seconds: ${GRAPHQL_TIMEOUT:30}

# JWT Configuration (Validator Only)
jwt:
  # Algorithm: HS256, RS256, or AUTO (default: AUTO - tries RS256 first, falls back to HS256)
  # Can be set via JWT_ALGORITHM environment variable
  algorithm: ${JWT_ALGORITHM:AUTO}
  # Secret key for HS256 validation (use strong random secret in production)
  # Can be set via JWT_SECRET environment variable
  # Required for HS256 validation
  secret: ${JWT_SECRET:change-me-in-production-use-strong-random-secret-min-32-chars}
  # RSA public key path (PEM format) - for RS256 validation
  # Can be set via JWT_PUBLIC_KEY_PATH environment variable
  public-key-path: ${JWT_PUBLIC_KEY_PATH:}
  # Inline RSA public key (PEM or base64) - alternative to public-key-path
  # Can be set via JWT_PUBLIC_KEY environment variable
  public-key: ${JWT_PUBLIC_KEY:}
  # Key ID for multi-key support (default: kid-1)
  # Can be set via JWT_KEY_ID environment variable
  key-id: ${JWT_KEY_ID:kid-1}
  # JWKS URL for fetching public keys (for future JWKS integration)
  # Can be set via JWT_JWKS_URL environment variable
  # Example: http://security-service:8080/.well-known/jwks.json
  jwks-url: ${JWT_JWKS_URL:}

# Vault Configuration
vault:
  # Enable Vault integration (default: false for development)
  # Can be set via VAULT_ENABLED environment variable
  enabled: ${VAULT_ENABLED:false}
  # Vault server address
  # Can be set via VAULT_ADDRESS environment variable
  address: ${VAULT_ADDRESS:http://localhost:8200}
  # Vault authentication token (should be provided via environment variable in production)
  # Can be set via VAULT_TOKEN environment variable
  token: ${VAULT_TOKEN:}
  # Secret path prefix in Vault (keys stored at {secret-path}/{keyId}/private, {secret-path}/{keyId}/public)
  # Can be set via VAULT_SECRET_PATH environment variable
  secret-path: ${VAULT_SECRET_PATH:secret/jwt/keys}
  # KV secrets engine version (default: 2)
  # Can be set via VAULT_ENGINE_VERSION environment variable
  engine-version: ${VAULT_ENGINE_VERSION:2}
  # Connection timeout in milliseconds (default: 5000)
  # Can be set via VAULT_CONNECTION_TIMEOUT environment variable
  connection-timeout: ${VAULT_CONNECTION_TIMEOUT:5000}
  # Read timeout in milliseconds (default: 5000)
  # Can be set via VAULT_READ_TIMEOUT environment variable
  read-timeout: ${VAULT_READ_TIMEOUT:5000}

# Micrometer Configuration for Metrics Collection
  metrics:
    enabled: true
    export:
      prometheus:
        enabled: true
        step: PT15S
  # Enable automatic HTTP request metrics
  observation:
    enabled: true

# Management Endpoints Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: always
    prometheus:
      enabled: true
      path: /prometheus
      sensitive: false  # No authentication required


